{% extends "base.html" %}

{% block title %}Event Details - House Points System{% endblock %}

{% block content %}
    {% if event %}
    <h2>Event Details</h2>

    <div class="stat-card" style="text-align: left; margin-bottom: 30px;">
        <h3 style="color: #333; font-size: 1.5em; margin-bottom: 10px;">{{ event[2] }}</h3>
        <p><strong>Date:</strong> {{ event[1] }}</p>
        <p><strong>Type:</strong> {{ event[3] }}</p>
        <p><strong>Event ID:</strong> {{ event[0] }}</p>
    </div>

    <h3>Results</h3>
    <table>
        <thead>
            <tr>
                <th>Rank</th>
                <th>House</th>
                <th>Points Earned</th>
            </tr>
        </thead>
        <tbody>
            {% for house_name, color, rank, points_earned in results %}
            <tr>
                <td><strong>{{ rank }}</strong></td>
                <td><span class="house-badge house-{{ color }}">{{ house_name }}</span></td>
                <td>{{ points_earned }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div style="margin-top: 30px; display: flex; gap: 10px;">
        <a href="{{ url_for('events') }}" class="btn btn-secondary">Back to Events</a>
        {% if current_user.role != 'guest' %}
        <form method="POST" action="{{ url_for('delete_event', event_id=event[0]) }}" style="margin: 0; padding: 0; background: none;" onsubmit="return confirm('Are you sure you want to delete this event? This will remove all associated points and cannot be undone.');">
            <button type="submit" style="background: #d64968; color: white;">Delete Event</button>
        </form>
        {% endif %}
    </div>

    {% else %}
    <p>Event not found.</p>
    <a href="{{ url_for('events') }}" class="btn btn-secondary">Back to Events</a>
    {% endif %}
{% endblock %}
