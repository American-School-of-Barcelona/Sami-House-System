{% extends "base.html" %}

{% block title %}House Points{% endblock %}

{% block content %}
<style>
    .dashboard {
        display: flex;
        align-items: center;
        gap: 60px;
        height: 80vh;
    }

    .left-section {
        flex: 0 0 auto;
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .title {
        font-family: 'Product Sans', sans-serif;
        font-size: 8em;
        font-weight: bold;
        line-height: 1.1;
        margin-bottom: 40px;
        margin-left: 40px;
    }

    .winner-display {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 15px;
    }

    .winner-icon-row {
        display: flex;
        align-items: center;
        gap: 20px;
    }

    .winner-house-name {
        font-size: 2.5em;
        font-weight: bold;
    }

    .winner-icon {
        width: 120px;
        height: 120px;
        background-color: white;
        border-radius: 50%;
        border: 6px solid #4a9ec9;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
    }

    .winner-icon svg {
        width: 80px;
        height: 80px;
    }

    .winner-icon svg path,
    .winner-icon svg circle,
    .winner-icon svg line {
        stroke: currentColor;
    }


    .winner-text {
        font-size: 3em;
        font-weight: bold;
    }

    .chart-section {
        flex: 1;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: 40px;
    }

    .chart-container {
        display: flex;
        align-items: flex-end;
        gap: 40px;
        height: 700px;
        padding: 20px;
    }

    .house-bar {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 15px;
        width: 100px;
    }

    .house-icon {
        width: 70px;
        height: 70px;
        background-color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 4px solid;
    }

    .house-icon svg {
        width: 45px;
        height: 45px;
    }

    .bar {
        width: 80px;
        border-radius: 15px 15px 0 0;
        position: relative;
        transition: height 0.5s ease;
        cursor: pointer;
    }

    .bar::before {
        content: attr(data-points) " points";
        position: absolute;
        bottom: 100%;
        left: 50%;
        transform: translateX(-50%) translateY(-10px);
        background-color: #1f1f1f;
        color: #e8e8d0;
        padding: 8px 12px;
        border-radius: 8px;
        font-size: 0.9em;
        font-weight: bold;
        white-space: nowrap;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.2s ease, transform 0.2s ease;
        z-index: 10;
    }

    .bar:hover::before {
        opacity: 1;
        transform: translateX(-50%) translateY(-5px);
    }

    .rank-label {
        background-color: #e8e8d0;
        color: #2b2b2b;
        padding: 10px 20px;
        border-radius: 15px;
        font-size: 1.5em;
        font-weight: bold;
    }

    /* House-specific colors */
    .house-poseidon .house-icon { border-color: #4a9ec9; color: #4a9ec9; }
    .house-poseidon .house-icon svg { fill: #4a9ec9; stroke: #4a9ec9; }
    .house-poseidon .bar { background-color: #4a9ec9; }

    .house-apollo .house-icon { border-color: #d64968; color: #d64968; }
    .house-apollo .house-icon svg { fill: #d64968; stroke: #d64968; }
    .house-apollo .bar { background-color: #d64968; }

    .house-artemis .house-icon { border-color: #6ba873; color: #6ba873; }
    .house-artemis .house-icon svg { fill: #6ba873; stroke: #6ba873; }
    .house-artemis .bar { background-color: #6ba873; }

    .house-athena .house-icon { border-color: #f4c430; color: #f4c430; }
    .house-athena .house-icon svg { fill: #f4c430; stroke: #f4c430; }
    .house-athena .bar { background-color: #f4c430; }

    /* Confetti Animation */
    .confetti-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        overflow: hidden;
        z-index: 50;
    }

    .confetti {
        position: absolute;
        width: 10px;
        height: 10px;
        opacity: 0;
        animation: confetti-fall 3s linear forwards;
    }

    @keyframes confetti-fall {
        0% {
            opacity: 1;
            transform: translateY(-100vh) rotate(0deg);
        }
        100% {
            opacity: 0;
            transform: translateY(100vh) rotate(720deg);
        }
    }

    .confetti:nth-child(1) { left: 10%; animation-delay: 0s; background: #4a9ec9; }
    .confetti:nth-child(2) { left: 20%; animation-delay: 0.15s; background: #d64968; }
    .confetti:nth-child(3) { left: 30%; animation-delay: 0.3s; background: #6ba873; }
    .confetti:nth-child(4) { left: 40%; animation-delay: 0.45s; background: #f4c430; }
    .confetti:nth-child(5) { left: 50%; animation-delay: 0.6s; background: #4a9ec9; }
    .confetti:nth-child(6) { left: 60%; animation-delay: 0.75s; background: #d64968; }
    .confetti:nth-child(7) { left: 70%; animation-delay: 0.9s; background: #6ba873; }
    .confetti:nth-child(8) { left: 80%; animation-delay: 1.05s; background: #f4c430; }
    .confetti:nth-child(9) { left: 90%; animation-delay: 1.2s; background: #4a9ec9; }
    .confetti:nth-child(10) { left: 15%; animation-delay: 1.35s; background: #d64968; }
    .confetti:nth-child(11) { left: 25%; animation-delay: 1.5s; background: #6ba873; }
    .confetti:nth-child(12) { left: 35%; animation-delay: 1.65s; background: #f4c430; }
    .confetti:nth-child(13) { left: 45%; animation-delay: 1.8s; background: #4a9ec9; }
    .confetti:nth-child(14) { left: 55%; animation-delay: 1.95s; background: #d64968; }
    .confetti:nth-child(15) { left: 65%; animation-delay: 2.1s; background: #6ba873; }
    .confetti:nth-child(16) { left: 75%; animation-delay: 2.25s; background: #f4c430; }
    .confetti:nth-child(17) { left: 85%; animation-delay: 2.4s; background: #4a9ec9; }
    .confetti:nth-child(18) { left: 95%; animation-delay: 2.55s; background: #d64968; }
    .confetti:nth-child(19) { left: 5%; animation-delay: 2.7s; background: #6ba873; }
    .confetti:nth-child(20) { left: 12%; animation-delay: 2.85s; background: #f4c430; }
    .confetti:nth-child(21) { left: 8%; animation-delay: 0.1s; background: #4a9ec9; }
    .confetti:nth-child(22) { left: 18%; animation-delay: 0.25s; background: #d64968; }
    .confetti:nth-child(23) { left: 28%; animation-delay: 0.4s; background: #6ba873; }
    .confetti:nth-child(24) { left: 38%; animation-delay: 0.55s; background: #f4c430; }
    .confetti:nth-child(25) { left: 48%; animation-delay: 0.7s; background: #4a9ec9; }
    .confetti:nth-child(26) { left: 58%; animation-delay: 0.85s; background: #d64968; }
    .confetti:nth-child(27) { left: 68%; animation-delay: 1s; background: #6ba873; }
    .confetti:nth-child(28) { left: 78%; animation-delay: 1.15s; background: #f4c430; }
    .confetti:nth-child(29) { left: 88%; animation-delay: 1.3s; background: #4a9ec9; }
    .confetti:nth-child(30) { left: 98%; animation-delay: 1.45s; background: #d64968; }
    .confetti:nth-child(31) { left: 3%; animation-delay: 1.6s; background: #6ba873; }
    .confetti:nth-child(32) { left: 13%; animation-delay: 1.75s; background: #f4c430; }
    .confetti:nth-child(33) { left: 23%; animation-delay: 1.9s; background: #4a9ec9; }
    .confetti:nth-child(34) { left: 33%; animation-delay: 2.05s; background: #d64968; }
    .confetti:nth-child(35) { left: 43%; animation-delay: 2.2s; background: #6ba873; }
    .confetti:nth-child(36) { left: 53%; animation-delay: 2.35s; background: #f4c430; }
    .confetti:nth-child(37) { left: 63%; animation-delay: 2.5s; background: #4a9ec9; }
    .confetti:nth-child(38) { left: 73%; animation-delay: 2.65s; background: #d64968; }
    .confetti:nth-child(39) { left: 83%; animation-delay: 2.8s; background: #6ba873; }
    .confetti:nth-child(40) { left: 93%; animation-delay: 2.95s; background: #f4c430; }
</style>

<!-- Confetti Animation -->
<div class="confetti-container">
    <div class="confetti"></div>
    <div class="confetti"></div>
    <div class="confetti"></div>
    <div class="confetti"></div>
    <div class="confetti"></div>
    <div class="confetti"></div>
    <div class="confetti"></div>
    <div class="confetti"></div>
    <div class="confetti"></div>
    <div class="confetti"></div>
    <div class="confetti"></div>
    <div class="confetti"></div>
    <div class="confetti"></div>
    <div class="confetti"></div>
    <div class="confetti"></div>
    <div class="confetti"></div>
    <div class="confetti"></div>
    <div class="confetti"></div>
    <div class="confetti"></div>
    <div class="confetti"></div>
    <div class="confetti"></div>
    <div class="confetti"></div>
    <div class="confetti"></div>
    <div class="confetti"></div>
    <div class="confetti"></div>
    <div class="confetti"></div>
    <div class="confetti"></div>
    <div class="confetti"></div>
    <div class="confetti"></div>
    <div class="confetti"></div>
    <div class="confetti"></div>
    <div class="confetti"></div>
    <div class="confetti"></div>
    <div class="confetti"></div>
    <div class="confetti"></div>
    <div class="confetti"></div>
    <div class="confetti"></div>
    <div class="confetti"></div>
    <div class="confetti"></div>
    <div class="confetti"></div>
</div>

<div class="dashboard">
    <div class="left-section">
        <div class="title">House<br>Points</div>

        {% if winner %}
        <div class="winner-display">
            <div class="winner-icon-row">
                <div class="winner-icon" style="color: {% if winner[0] == 'Poseidon' %}#4a9ec9{% elif winner[0] == 'Apollo' %}#d64968{% elif winner[0] == 'Artemis' %}#6ba873{% else %}#f4c430{% endif %}; border-color: {% if winner[0] == 'Poseidon' %}#4a9ec9{% elif winner[0] == 'Apollo' %}#d64968{% elif winner[0] == 'Artemis' %}#6ba873{% else %}#f4c430{% endif %};">
                    {% if winner[0] == 'Poseidon' %}
                <!-- Poseidon Trident -->
                <svg viewBox="0 0 501.4 501.4" xmlns="http://www.w3.org/2000/svg">
                    <path fill="currentColor" d="M501.4,250.7c0,138.46-112.24,250.7-250.7,250.7S0,389.16,0,250.7,112.24,0,250.7,0s250.7,112.24,250.7,250.7ZM480.6,250.68c0-126.97-102.93-229.9-229.9-229.9S20.8,123.71,20.8,250.68s102.93,229.9,229.9,229.9,229.9-102.93,229.9-229.9Z"/>
                    <path fill="currentColor" d="M268.29,454.01l-37.35.07v-107.21s-72.09,10.97-72.09,10.97l-1.58-25.99c-4.16-53.55-18.52-102.27-42.3-150.33-10.36-20.93-21.96-40.47-35.01-60.5,20.25,5.45,38.34,12.78,56.28,21.02,7.45,3.8,14.46,7.38,21.24,12.08,4.35,3.01,8.42,6.02,11.79,10.27l-20.71-5.9c11.94,27.99,20.96,56.47,27.47,86.04,5.28,23.56,8.77,47.15,11.4,71.36l43.03-6.28v-168.44s-31.56,3.77-31.56,3.77c5.1-6.14,9.58-12.11,13.59-18.88,6.84-11.03,12.61-22.23,18.22-33.98l18.53-41.49c.12-.28.69-.09.79.13l17.37,39.28c5.7,12.19,11.66,23.76,18.62,35.25,4.19,6.91,8.51,13.08,14.04,19.6l-31.31-3.67v168.43s42.98,6.3,42.98,6.3c2.56-24.96,6.37-49.34,11.89-73.65,6.51-28.77,15.35-56.5,27.09-83.83l-20.06,5.83c-.44.15-.77-.01-.48-.38,3.01-3.64,6.55-6.35,10.36-9.08,7.13-4.83,14.33-8.93,22.24-12.66,18.09-8.52,36.62-15.72,56.56-21.18-16.98,25.75-31.69,51.59-43.93,79.26-18.75,42.36-30.83,87.54-33.58,133.81l-1.52,23.82-72.02-10.96v107.14Z"/>
                </svg>
                {% elif winner[0] == 'Apollo' %}
                <!-- Apollo Sun -->
                <svg viewBox="0 0 501.1 501.1" xmlns="http://www.w3.org/2000/svg">
                    <path fill="currentColor" d="M501.1,250.55c0,138.38-112.18,250.55-250.55,250.55S0,388.92,0,250.55,112.18,0,250.55,0s250.55,112.18,250.55,250.55ZM480.3,250.53c0-126.89-102.86-229.75-229.75-229.75S20.8,123.64,20.8,250.53s102.86,229.75,229.75,229.75,229.75-102.86,229.75-229.75h0Z"/>
                    <path fill="currentColor" d="M267.76,458.35c-4.59,5.27-9.59,13.28-16.67,10.03-2.21-1.01-4.04-2.64-5.53-4.61-6.7-8.88-14.34-16.42-23.39-22.9l-16.19-11.58c-4.14-2.96-7.71-6.26-10.57-10.44-5.91-8.65-1.42-17.74,5.27-24.2,2.89-2.79,6.02-4.71,9.62-7.16-30.17-5.88-63-16.55-84.73-38.99-20.65-21.33-24.69-48.94-17.36-77.12,3.78-14.54,9.29-28.27,16.53-41.39l9.94-18.01,13.61-24.26c4.77-8.51,8.66-17.03,12.12-26.17,6.42-16.94,10.99-37.55,6.16-55.29-1.54-5.64-3.99-10.85-8.25-15.02,1.09,12.67-8.08,23.11-20.02,24.09s-23.02-8.49-23.49-21.04c-.25-6.57,2.17-12.33,7.46-16.41,17.7-13.64,43.47-19.04,59.73.3,2.77,3.31,4.77,6.77,6.7,10.64,2.83,6.17,4.66,12.48,6.01,19.45l27.4.06-.03-23.2c-4.08.11-6.97-2.67-7.07-6.23s2.7-6.54,6.45-6.52l14.77.07c3.67.02,6.13,3.55,5.86,6.85-.28,3.47-3.33,5.94-7.1,5.83l-.04,23.14,12.02.03.03-42.19c-1.76-.35-3.48-.03-5.32-.17-3.58-.27-6.1-3.13-6.08-6.43.02-3.49,2.76-6.42,6.52-6.42h22.71c3.7,0,6.31,3.06,6.35,6.44s-2.72,6.27-6.34,6.43c-1.71.08-3.26-.17-5.03.12v42.15l10.99.03v-22.12c-3.78-.01-6.66-2.29-7.09-5.71s1.98-7.1,5.74-7.12l14.77-.09c3.78-.02,6.59,2.96,6.58,6.51s-3.07,6.41-7.12,6.41v22.18l26.45-.03c1.34-7.6,3.33-14.49,6.51-21.18,6.1-12.55,15.92-20.4,30.21-21.16,12.05-.64,27.57,2.74,36.27,11.86,5.04,5.28,7.56,12.37,6.49,19.54-1.69,11.25-11.22,18.67-22.53,18.05-12.5-.7-21.75-11.33-20.67-24.15-15.7,15.49-10.83,43.39-4.88,62.22,4.97,15.73,11.94,30.3,20.49,44.4,17.82,29.39,37.52,67.28,37.5,102.23-.02,23.94-12.41,42.21-30.66,56.42-19.67,15.31-45.56,25.34-69.86,30.37-.48.1-.53.28-.34.49.14.15,5.9,3.83,7.76,5.42,7.81,6.66,13.97,16.91,6.93,26.58-2.95,4.05-6.57,7.35-10.7,10.28l-13.84,9.81c-7.8,5.53-14.79,11.65-21.07,18.87h.02ZM145.61,93.55c0-5-4.05-9.04-9.04-9.04s-9.04,4.05-9.04,9.04,4.05,9.04,9.04,9.04,9.04-4.05,9.04-9.04ZM378.29,93.55c0-5-4.05-9.05-9.05-9.05s-9.05,4.05-9.05,9.05,4.05,9.05,9.05,9.05,9.05-4.05,9.05-9.05ZM186.78,324.25c11.6,6.81,27.76,7.75,36.61-2.74,4.49-5.33,4.69-12.46.6-17.97-5.59-7.54-12.74-5.99-11.33-13.63.38-2.06,1.96-4.26,4.4-4.86l5.1-1.25V121.27l-25.8-.07c.87,11.62.1,22.92-2.41,34.36-1.99,9.07-4.34,17.54-7.32,26.34l-12.58,37.13c-1.97,5.81-3.99,11.21-5.69,17.09-.2.71,0,1.53.4,2.01,1.55,1.9,11.78-3.26,20.33-.35,1.22.42,2.22,1.29,2.49,2.11.4,1.23.19,2.77-.61,3.68l-7.24,8.31c-15.13,17.37-25.66,55.51,3.06,72.36h0ZM247.01,121.22h-12.04v161.59h12.04V121.22ZM270.85,121.22h-11.02v161.64h11.02V121.22h0ZM315.42,244.4c-.94-1.09-1.05-2.51-.69-3.58,1.24-3.7,10.22-3.8,13.7-3.52,2.38.19,4.54.8,6.88.76.47-1.34.18-2.68-.12-4.03-1.45-6.48-3.51-12.46-5.65-18.77l-11.17-33.04c-2.81-8.3-5.18-16.26-7.18-24.8-3.01-11.9-3.92-23.8-2.66-36.17l-24.87-.02v162.74c3.03,1.24,6.89.82,8.22,5.35.81,2.74.07,5.72-2.47,7.18-3.13,1.8-5.96,3.66-8.31,6.44-4.1,4.86-4.57,11.58-1.04,16.97,5.67,8.66,18.08,11.06,27.61,8.7,16.77-4.16,28.29-18.79,28.84-36.1.29-9.19-2.04-17.78-6-26.06s-9.18-15.13-15.11-22.05h.02ZM257.62,431.11c10.06-10.98,15.97-11.65,21.45-16.97,2.72-2.64,2.75-6.08.3-9.02-3.67-4.39-10.28-5.55-11.78-10.03-.52-1.57-1.41-2.38-3.17-2.39l-19.33-.08c-2,0-3,1.15-3.73,2.8-2.34,5.28-9.11,5.22-12.59,11.2-1.34,2.31-1.01,4.83.72,6.81,4.62,5.29,12,6.69,21.83,17.66,1.63,1.82,4.41,2.08,6.3.02h0Z"/>
                </svg>
                {% elif winner[0] == 'Artemis' %}
                <!-- Artemis Bow and Arrow -->
                <svg viewBox="0 0 505.1 504.86" xmlns="http://www.w3.org/2000/svg">
                    <path fill="currentColor" d="M505.1,252.43c0,139.41-113.07,252.43-252.55,252.43S0,391.84,0,252.43,113.07,0,252.55,0s252.55,113.02,252.55,252.43ZM484.11,252.41c0-127.83-103.67-231.45-231.56-231.45S20.99,124.58,20.99,252.41s103.67,231.45,231.56,231.45,231.56-103.62,231.56-231.45h0Z"/>
                    <path fill="currentColor" d="M401.78,111.55l6.05-25.08-25.73,7.59,19.67,17.49h.01ZM399.57,120.18l-26.45-23.51c-2.02.53-3.72.82-5.45,1.7l30.21,29c.75-2.38,1.35-4.5,1.7-7.18h0ZM374.39,115.87l-41.88,43.89,5.77,5.5,41.88-43.89-5.77-5.5ZM327.01,165.41c-6.25-5.68-12.19-10.12-18.81-14.34-11.66-7.78-23.6-14.38-36.55-19.9-40.49-17.01-80.66-17.09-121.75-2.03-14.96,5.49-31.18,1.96-42.71-8.97-4.64-4.4-11.95-3.41-15.92,1.05s-3.94,11.61.6,15.88l7.18,6.74c9.08,8.53,21.91,11.15,33.69,6.81,54.09-19.9,104.58-13.52,153.84,15.27,8.53,4.99,16.35,10.36,23.71,17.13l16.72-17.64h0ZM135.04,323.21l2.74-165.89-7.98,2.56-2.71,165.37c3.81-3.31,3.22-1.88,7.95-2.04ZM372.08,405.04c4.77,4.53,11.93,4,16.17-.53,4.05-4.33,4.2-11.55-.31-15.86-11.66-11.14-15.54-27.4-10.66-42.77,11.69-36.74,11.23-74.31-3.12-110.28-6.59-16.64-15.54-32.05-26.08-46.5-4.73-6.55-9.58-12.48-15.34-18.17l-16.66,17.55c5.37,5.47,9.79,11.02,14.19,17.18,9.82,14.25,18.06,29.4,24.16,45.62,14.1,37.49,14.1,75.28,2.11,113.3-3.82,12.12-.65,25.07,8.55,33.81l6.98,6.64h0ZM196.52,313.92l113.93-119.53c-1.63-2.06-3.62-3.76-5.69-5.55l-113.99,119.67c1.47.53,3.06.48,4.13,1.44s.69,2.55,1.62,3.97h0ZM172.57,327.63l10.99-11.78-32.33-3.68-7.33,12.33,28.68,3.13h0ZM182.76,361.55l11.8-7.8-5.18-32.23-11.2,11.66,4.59,28.36h-.01ZM154.49,346.57l11.01-11.79-32.32-3.6-7.32,12.25,28.63,3.14ZM164.69,380.48l11.8-7.78-5.2-32.25-11.17,11.76,4.57,28.27h0ZM132.54,369.7l14.94-15.85-32.39-3.69-9.43,15.7,26.89,3.84h-.01ZM143.23,401.74l15.2-10.12-5.18-32.22-15.16,15.82,5.14,26.51h0ZM182.81,378.42l164.73-10.26,1.98-8.12-164.95,10.37c-.6,4.48,1.62,3.61-1.76,8.01h0ZM131.4,382.31c-.29-1.95-.47-3.27-.94-4.74-1.69-.4-3.13-.66-4.84-.72l-21.43,22.53c-1.58,1.66-1.24,4.23.26,5.57s3.93,1.49,5.55-.21l21.4-22.42h0Z"/>
                </svg>
                {% else %}
                <!-- Athena Owl -->
                <svg viewBox="0 0 498.71 498.71" xmlns="http://www.w3.org/2000/svg">
                    <path fill="currentColor" d="M498.71,249.36c0,137.72-111.64,249.36-249.36,249.36S0,387.07,0,249.36,111.64,0,249.36,0s249.36,111.64,249.36,249.36ZM478.02,249.32c0-126.29-102.38-228.66-228.66-228.66S20.69,123.03,20.69,249.32s102.38,228.66,228.66,228.66,228.66-102.38,228.66-228.66Z"/>
                    <path fill="currentColor" d="M377.86,435.22H121.97c-5.44.01-8.89-4.02-9.18-9.11-.11-1.99.12-3.51.12-5.66v-204.24c0-3.6-.17-16.48-.04-18.7l.94-16.05c1.14-19.52,6.16-38.52,19.12-53.36,23.45-37.76,65.07-61.4,109.69-61.39h14.82c44.49,0,85.44,23.32,109.14,60.68,13.33,14.97,18.56,34.2,19.7,54.09l.92,16.12-.32,97.45c-.17,51.19-30.25,97.51-74.86,122.45l66.57.13c5.04.01,8.3,4.51,8.21,8.99s-3.68,8.6-8.94,8.6ZM250.06,129.06c16.79-19.95,40.77-29.43,66.52-27.52-15.69-9.98-33.24-15.65-51.57-17-10.51-.42-20.29-.41-30.82.04-17.92,1.62-35.22,7.07-50.7,16.93,27.27-1.72,49.05,7.76,66.56,27.55ZM368.51,181.97c.21-4.55-.24-8.35-.72-12.74-.73-6.66-2.75-12.97-6.26-18.69-2.76-4.5-5.54-8.8-9.07-12.64-17.34-18.83-44.47-24.23-67.81-13.67-16.64,7.53-28.98,22.54-33.31,40.28-.23.95-.52,1.42-1.32,1.42-.61,0-1.2-.53-1.41-1.37-3.63-14.43-12.09-26.86-24.35-35.29-24.08-16.55-57.24-13.09-76.8,8.93-3.91,4.4-6.41,10.1-9.44,15.26-7.95,13.52-7.73,28.48-4.57,43.44,1.54,7.28,4.87,13.57,10.2,18.88,9.54,9.5,21.42,16.64,34.57,20.02,8.5,2.19,16.89,3.07,25.8,3.05l107.57-.26c30.86-.07,55.53-26.37,56.93-56.62ZM149.66,417.56l95.46.07c25.25-.62,49.43-8.26,69.85-22.69,34.02-23.75,54.7-62.41,54.69-104.05v-64.05c-13.89,17.65-33.5,27.69-55.54,29.64l-130.68.11c31.45,55.07,17.11,123.65-33.78,160.98ZM154.79,247.33l-14.55-12.68c-3.38-2.03-5.83-4.89-9.85-6.69l-.03,181.08c34.17-19.69,54.34-56.94,52.07-96.3-1.4-24.26-9.19-49.34-27.64-65.42Z"/>
                    <polygon fill="currentColor" points="264.91 209.71 250.06 235.46 235.17 209.79 249.99 195.64 264.91 209.71"/>
                    <path fill="currentColor" d="M333.26,180.77c0,14.06-11.4,25.46-25.46,25.46s-25.46-11.4-25.46-25.46,11.4-25.46,25.46-25.46,25.46,11.4,25.46,25.46ZM315.79,180.73c0-4.41-3.57-7.98-7.98-7.98s-7.98,3.57-7.98,7.98,3.57,7.98,7.98,7.98,7.98-3.57,7.98-7.98Z"/>
                    <circle fill="white" cx="307.81" cy="180.73" r="7.98"/>
                    <path fill="currentColor" d="M217.69,180.78c0,14.06-11.4,25.47-25.47,25.47s-25.47-11.4-25.47-25.47,11.4-25.47,25.47-25.47,25.47,11.4,25.47,25.47ZM200.23,180.73c0-4.41-3.57-7.98-7.98-7.98s-7.98,3.57-7.98,7.98,3.57,7.98,7.98,7.98,7.98-3.57,7.98-7.98Z"/>
                    <circle fill="white" cx="192.25" cy="180.73" r="7.98"/>
                </svg>
                    {% endif %}
                </div>
                <div class="winner-house-name" style="color: {% if winner[0] == 'Poseidon' %}#4a9ec9{% elif winner[0] == 'Apollo' %}#d64968{% elif winner[0] == 'Artemis' %}#6ba873{% else %}#f4c430{% endif %};">{{ winner[0] }}</div>
            </div>
            <div class="winner-text">Is Winning!</div>
        </div>
        {% endif %}
    </div>

    <div class="chart-section">
        <div class="chart-container">
            {% set max_points = leaderboard[0][3] if leaderboard else 1 %}
            {% for rank, house_name, color, points, events, wins, second, third, fourth in leaderboard %}
            <div class="house-bar house-{{ house_name|lower }}">
                <div class="house-icon">
                    {% if house_name == 'Poseidon' %}
                    <svg viewBox="0 0 501.4 501.4" xmlns="http://www.w3.org/2000/svg">
                        <path fill="currentColor" d="M501.4,250.7c0,138.46-112.24,250.7-250.7,250.7S0,389.16,0,250.7,112.24,0,250.7,0s250.7,112.24,250.7,250.7ZM480.6,250.68c0-126.97-102.93-229.9-229.9-229.9S20.8,123.71,20.8,250.68s102.93,229.9,229.9,229.9,229.9-102.93,229.9-229.9Z"/>
                        <path fill="currentColor" d="M268.29,454.01l-37.35.07v-107.21s-72.09,10.97-72.09,10.97l-1.58-25.99c-4.16-53.55-18.52-102.27-42.3-150.33-10.36-20.93-21.96-40.47-35.01-60.5,20.25,5.45,38.34,12.78,56.28,21.02,7.45,3.8,14.46,7.38,21.24,12.08,4.35,3.01,8.42,6.02,11.79,10.27l-20.71-5.9c11.94,27.99,20.96,56.47,27.47,86.04,5.28,23.56,8.77,47.15,11.4,71.36l43.03-6.28v-168.44s-31.56,3.77-31.56,3.77c5.1-6.14,9.58-12.11,13.59-18.88,6.84-11.03,12.61-22.23,18.22-33.98l18.53-41.49c.12-.28.69-.09.79.13l17.37,39.28c5.7,12.19,11.66,23.76,18.62,35.25,4.19,6.91,8.51,13.08,14.04,19.6l-31.31-3.67v168.43s42.98,6.3,42.98,6.3c2.56-24.96,6.37-49.34,11.89-73.65,6.51-28.77,15.35-56.5,27.09-83.83l-20.06,5.83c-.44.15-.77-.01-.48-.38,3.01-3.64,6.55-6.35,10.36-9.08,7.13-4.83,14.33-8.93,22.24-12.66,18.09-8.52,36.62-15.72,56.56-21.18-16.98,25.75-31.69,51.59-43.93,79.26-18.75,42.36-30.83,87.54-33.58,133.81l-1.52,23.82-72.02-10.96v107.14Z"/>
                    </svg>
                    {% elif house_name == 'Apollo' %}
                    <svg viewBox="0 0 501.1 501.1" xmlns="http://www.w3.org/2000/svg">
                        <path fill="currentColor" d="M501.1,250.55c0,138.38-112.18,250.55-250.55,250.55S0,388.92,0,250.55,112.18,0,250.55,0s250.55,112.18,250.55,250.55ZM480.3,250.53c0-126.89-102.86-229.75-229.75-229.75S20.8,123.64,20.8,250.53s102.86,229.75,229.75,229.75,229.75-102.86,229.75-229.75h0Z"/>
                        <path fill="currentColor" d="M267.76,458.35c-4.59,5.27-9.59,13.28-16.67,10.03-2.21-1.01-4.04-2.64-5.53-4.61-6.7-8.88-14.34-16.42-23.39-22.9l-16.19-11.58c-4.14-2.96-7.71-6.26-10.57-10.44-5.91-8.65-1.42-17.74,5.27-24.2,2.89-2.79,6.02-4.71,9.62-7.16-30.17-5.88-63-16.55-84.73-38.99-20.65-21.33-24.69-48.94-17.36-77.12,3.78-14.54,9.29-28.27,16.53-41.39l9.94-18.01,13.61-24.26c4.77-8.51,8.66-17.03,12.12-26.17,6.42-16.94,10.99-37.55,6.16-55.29-1.54-5.64-3.99-10.85-8.25-15.02,1.09,12.67-8.08,23.11-20.02,24.09s-23.02-8.49-23.49-21.04c-.25-6.57,2.17-12.33,7.46-16.41,17.7-13.64,43.47-19.04,59.73.3,2.77,3.31,4.77,6.77,6.7,10.64,2.83,6.17,4.66,12.48,6.01,19.45l27.4.06-.03-23.2c-4.08.11-6.97-2.67-7.07-6.23s2.7-6.54,6.45-6.52l14.77.07c3.67.02,6.13,3.55,5.86,6.85-.28,3.47-3.33,5.94-7.1,5.83l-.04,23.14,12.02.03.03-42.19c-1.76-.35-3.48-.03-5.32-.17-3.58-.27-6.1-3.13-6.08-6.43.02-3.49,2.76-6.42,6.52-6.42h22.71c3.7,0,6.31,3.06,6.35,6.44s-2.72,6.27-6.34,6.43c-1.71.08-3.26-.17-5.03.12v42.15l10.99.03v-22.12c-3.78-.01-6.66-2.29-7.09-5.71s1.98-7.1,5.74-7.12l14.77-.09c3.78-.02,6.59,2.96,6.58,6.51s-3.07,6.41-7.12,6.41v22.18l26.45-.03c1.34-7.6,3.33-14.49,6.51-21.18,6.1-12.55,15.92-20.4,30.21-21.16,12.05-.64,27.57,2.74,36.27,11.86,5.04,5.28,7.56,12.37,6.49,19.54-1.69,11.25-11.22,18.67-22.53,18.05-12.5-.7-21.75-11.33-20.67-24.15-15.7,15.49-10.83,43.39-4.88,62.22,4.97,15.73,11.94,30.3,20.49,44.4,17.82,29.39,37.52,67.28,37.5,102.23-.02,23.94-12.41,42.21-30.66,56.42-19.67,15.31-45.56,25.34-69.86,30.37-.48.1-.53.28-.34.49.14.15,5.9,3.83,7.76,5.42,7.81,6.66,13.97,16.91,6.93,26.58-2.95,4.05-6.57,7.35-10.7,10.28l-13.84,9.81c-7.8,5.53-14.79,11.65-21.07,18.87h.02ZM145.61,93.55c0-5-4.05-9.04-9.04-9.04s-9.04,4.05-9.04,9.04,4.05,9.04,9.04,9.04,9.04-4.05,9.04-9.04ZM378.29,93.55c0-5-4.05-9.05-9.05-9.05s-9.05,4.05-9.05,9.05,4.05,9.05,9.05,9.05,9.05-4.05,9.05-9.05ZM186.78,324.25c11.6,6.81,27.76,7.75,36.61-2.74,4.49-5.33,4.69-12.46.6-17.97-5.59-7.54-12.74-5.99-11.33-13.63.38-2.06,1.96-4.26,4.4-4.86l5.1-1.25V121.27l-25.8-.07c.87,11.62.1,22.92-2.41,34.36-1.99,9.07-4.34,17.54-7.32,26.34l-12.58,37.13c-1.97,5.81-3.99,11.21-5.69,17.09-.2.71,0,1.53.4,2.01,1.55,1.9,11.78-3.26,20.33-.35,1.22.42,2.22,1.29,2.49,2.11.4,1.23.19,2.77-.61,3.68l-7.24,8.31c-15.13,17.37-25.66,55.51,3.06,72.36h0ZM247.01,121.22h-12.04v161.59h12.04V121.22ZM270.85,121.22h-11.02v161.64h11.02V121.22h0ZM315.42,244.4c-.94-1.09-1.05-2.51-.69-3.58,1.24-3.7,10.22-3.8,13.7-3.52,2.38.19,4.54.8,6.88.76.47-1.34.18-2.68-.12-4.03-1.45-6.48-3.51-12.46-5.65-18.77l-11.17-33.04c-2.81-8.3-5.18-16.26-7.18-24.8-3.01-11.9-3.92-23.8-2.66-36.17l-24.87-.02v162.74c3.03,1.24,6.89.82,8.22,5.35.81,2.74.07,5.72-2.47,7.18-3.13,1.8-5.96,3.66-8.31,6.44-4.1,4.86-4.57,11.58-1.04,16.97,5.67,8.66,18.08,11.06,27.61,8.7,16.77-4.16,28.29-18.79,28.84-36.1.29-9.19-2.04-17.78-6-26.06s-9.18-15.13-15.11-22.05h.02ZM257.62,431.11c10.06-10.98,15.97-11.65,21.45-16.97,2.72-2.64,2.75-6.08.3-9.02-3.67-4.39-10.28-5.55-11.78-10.03-.52-1.57-1.41-2.38-3.17-2.39l-19.33-.08c-2,0-3,1.15-3.73,2.8-2.34,5.28-9.11,5.22-12.59,11.2-1.34,2.31-1.01,4.83.72,6.81,4.62,5.29,12,6.69,21.83,17.66,1.63,1.82,4.41,2.08,6.3.02h0Z"/>
                    </svg>
                    {% elif house_name == 'Artemis' %}
                    <svg viewBox="0 0 505.1 504.86" xmlns="http://www.w3.org/2000/svg">
                        <path fill="currentColor" d="M505.1,252.43c0,139.41-113.07,252.43-252.55,252.43S0,391.84,0,252.43,113.07,0,252.55,0s252.55,113.02,252.55,252.43ZM484.11,252.41c0-127.83-103.67-231.45-231.56-231.45S20.99,124.58,20.99,252.41s103.67,231.45,231.56,231.45,231.56-103.62,231.56-231.45h0Z"/>
                        <path fill="currentColor" d="M401.78,111.55l6.05-25.08-25.73,7.59,19.67,17.49h.01ZM399.57,120.18l-26.45-23.51c-2.02.53-3.72.82-5.45,1.7l30.21,29c.75-2.38,1.35-4.5,1.7-7.18h0ZM374.39,115.87l-41.88,43.89,5.77,5.5,41.88-43.89-5.77-5.5ZM327.01,165.41c-6.25-5.68-12.19-10.12-18.81-14.34-11.66-7.78-23.6-14.38-36.55-19.9-40.49-17.01-80.66-17.09-121.75-2.03-14.96,5.49-31.18,1.96-42.71-8.97-4.64-4.4-11.95-3.41-15.92,1.05s-3.94,11.61.6,15.88l7.18,6.74c9.08,8.53,21.91,11.15,33.69,6.81,54.09-19.9,104.58-13.52,153.84,15.27,8.53,4.99,16.35,10.36,23.71,17.13l16.72-17.64h0ZM135.04,323.21l2.74-165.89-7.98,2.56-2.71,165.37c3.81-3.31,3.22-1.88,7.95-2.04ZM372.08,405.04c4.77,4.53,11.93,4,16.17-.53,4.05-4.33,4.2-11.55-.31-15.86-11.66-11.14-15.54-27.4-10.66-42.77,11.69-36.74,11.23-74.31-3.12-110.28-6.59-16.64-15.54-32.05-26.08-46.5-4.73-6.55-9.58-12.48-15.34-18.17l-16.66,17.55c5.37,5.47,9.79,11.02,14.19,17.18,9.82,14.25,18.06,29.4,24.16,45.62,14.1,37.49,14.1,75.28,2.11,113.3-3.82,12.12-.65,25.07,8.55,33.81l6.98,6.64h0ZM196.52,313.92l113.93-119.53c-1.63-2.06-3.62-3.76-5.69-5.55l-113.99,119.67c1.47.53,3.06.48,4.13,1.44s.69,2.55,1.62,3.97h0ZM172.57,327.63l10.99-11.78-32.33-3.68-7.33,12.33,28.68,3.13h0ZM182.76,361.55l11.8-7.8-5.18-32.23-11.2,11.66,4.59,28.36h-.01ZM154.49,346.57l11.01-11.79-32.32-3.6-7.32,12.25,28.63,3.14ZM164.69,380.48l11.8-7.78-5.2-32.25-11.17,11.76,4.57,28.27h0ZM132.54,369.7l14.94-15.85-32.39-3.69-9.43,15.7,26.89,3.84h-.01ZM143.23,401.74l15.2-10.12-5.18-32.22-15.16,15.82,5.14,26.51h0ZM182.81,378.42l164.73-10.26,1.98-8.12-164.95,10.37c-.6,4.48,1.62,3.61-1.76,8.01h0ZM131.4,382.31c-.29-1.95-.47-3.27-.94-4.74-1.69-.4-3.13-.66-4.84-.72l-21.43,22.53c-1.58,1.66-1.24,4.23.26,5.57s3.93,1.49,5.55-.21l21.4-22.42h0Z"/>
                    </svg>
                    {% else %}
                    <svg viewBox="0 0 498.71 498.71" xmlns="http://www.w3.org/2000/svg">
                        <path fill="currentColor" d="M498.71,249.36c0,137.72-111.64,249.36-249.36,249.36S0,387.07,0,249.36,111.64,0,249.36,0s249.36,111.64,249.36,249.36ZM478.02,249.32c0-126.29-102.38-228.66-228.66-228.66S20.69,123.03,20.69,249.32s102.38,228.66,228.66,228.66,228.66-102.38,228.66-228.66Z"/>
                        <path fill="currentColor" d="M377.86,435.22H121.97c-5.44.01-8.89-4.02-9.18-9.11-.11-1.99.12-3.51.12-5.66v-204.24c0-3.6-.17-16.48-.04-18.7l.94-16.05c1.14-19.52,6.16-38.52,19.12-53.36,23.45-37.76,65.07-61.4,109.69-61.39h14.82c44.49,0,85.44,23.32,109.14,60.68,13.33,14.97,18.56,34.2,19.7,54.09l.92,16.12-.32,97.45c-.17,51.19-30.25,97.51-74.86,122.45l66.57.13c5.04.01,8.3,4.51,8.21,8.99s-3.68,8.6-8.94,8.6ZM250.06,129.06c16.79-19.95,40.77-29.43,66.52-27.52-15.69-9.98-33.24-15.65-51.57-17-10.51-.42-20.29-.41-30.82.04-17.92,1.62-35.22,7.07-50.7,16.93,27.27-1.72,49.05,7.76,66.56,27.55ZM368.51,181.97c.21-4.55-.24-8.35-.72-12.74-.73-6.66-2.75-12.97-6.26-18.69-2.76-4.5-5.54-8.8-9.07-12.64-17.34-18.83-44.47-24.23-67.81-13.67-16.64,7.53-28.98,22.54-33.31,40.28-.23.95-.52,1.42-1.32,1.42-.61,0-1.2-.53-1.41-1.37-3.63-14.43-12.09-26.86-24.35-35.29-24.08-16.55-57.24-13.09-76.8,8.93-3.91,4.4-6.41,10.1-9.44,15.26-7.95,13.52-7.73,28.48-4.57,43.44,1.54,7.28,4.87,13.57,10.2,18.88,9.54,9.5,21.42,16.64,34.57,20.02,8.5,2.19,16.89,3.07,25.8,3.05l107.57-.26c30.86-.07,55.53-26.37,56.93-56.62ZM149.66,417.56l95.46.07c25.25-.62,49.43-8.26,69.85-22.69,34.02-23.75,54.7-62.41,54.69-104.05v-64.05c-13.89,17.65-33.5,27.69-55.54,29.64l-130.68.11c31.45,55.07,17.11,123.65-33.78,160.98ZM154.79,247.33l-14.55-12.68c-3.38-2.03-5.83-4.89-9.85-6.69l-.03,181.08c34.17-19.69,54.34-56.94,52.07-96.3-1.4-24.26-9.19-49.34-27.64-65.42Z"/>
                        <polygon fill="currentColor" points="264.91 209.71 250.06 235.46 235.17 209.79 249.99 195.64 264.91 209.71"/>
                        <path fill="currentColor" d="M333.26,180.77c0,14.06-11.4,25.46-25.46,25.46s-25.46-11.4-25.46-25.46,11.4-25.46,25.46-25.46,25.46,11.4,25.46,25.46ZM315.79,180.73c0-4.41-3.57-7.98-7.98-7.98s-7.98,3.57-7.98,7.98,3.57,7.98,7.98,7.98,7.98-3.57,7.98-7.98Z"/>
                        <circle fill="white" cx="307.81" cy="180.73" r="7.98"/>
                        <path fill="currentColor" d="M217.69,180.78c0,14.06-11.4,25.47-25.47,25.47s-25.47-11.4-25.47-25.47,11.4-25.47,25.47-25.47,25.47,11.4,25.47,25.47ZM200.23,180.73c0-4.41-3.57-7.98-7.98-7.98s-7.98,3.57-7.98,7.98,3.57,7.98,7.98,7.98,7.98-3.57,7.98-7.98Z"/>
                        <circle fill="white" cx="192.25" cy="180.73" r="7.98"/>
                    </svg>
                    {% endif %}
                </div>

                <div class="bar" style="height: {{ (points / max_points * 500) | int }}px;" data-points="{{ points }}"></div>

                <div class="rank-label">
                    {% if rank == 1 %}1st
                    {% elif rank == 2 %}2nd
                    {% elif rank == 3 %}3rd
                    {% else %}4th{% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}
